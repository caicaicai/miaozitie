<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬”ç”»ç´¯ç§¯ç»ƒå­—å¸–</title>
    <!-- <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script> -->
    <script src="hanzi-writer.min.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/pinyin-pro@3.19.6/dist/index.js"></script> -->
    <script src="pinyin-pro.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .header .nav-link {
            display: inline-block;
            margin-top: 15px;
            padding: 8px 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 20px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .header .nav-link:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .control-panel {
            padding: 30px;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
            font-size: 1.1em;
        }

        .input-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s;
        }

        .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        button {
            padding: 15px 30px;
            font-size: 16px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            flex: 1;
            min-width: 150px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #28a745;
            color: white;
        }

        .btn-secondary:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .btn-print {
            background: #fd7e14;
            color: white;
        }

        .btn-print:hover {
            background: #e8590c;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(253, 126, 20, 0.4);
        }

        .options-group {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .option-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .option-item label {
            margin: 0;
            font-weight: normal;
        }

        .option-item input[type="number"] {
            width: 80px;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .option-item select {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            background: white;
        }

        .preview-area {
            padding: 30px;
            min-height: 400px;
        }

        .char-row {
            margin-bottom: 20px;
            page-break-inside: avoid;
            border-bottom: 1px dashed #e9ecef;
            padding-bottom: 12px;
        }

        .char-row:last-child {
            border-bottom: none;
        }

        .char-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 6px;
            flex-wrap: wrap;
        }

        .char-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
            align-items: center;
            justify-content: center;
        }

        .char-title {
            font-size: 32px;
            font-weight: bold;
            color: #333;
            line-height: 1;
            text-align: center;
        }

        .char-pinyin {
            font-size: 12px;
            color: #667eea;
            font-weight: bold;
            font-family: Arial, sans-serif;
            text-align: center;
        }

        .stroke-demo-section {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            flex-wrap: wrap;
        }

        .section-label {
            font-size: 12px;
            color: #666;
            font-weight: bold;
            white-space: nowrap;
        }

        .practice-demo-section {
            margin-top: 8px;
        }

        .stroke-sequence {
            display: flex;
            gap: 3px;
            flex-wrap: wrap;
            align-items: flex-start;
        }

        .practice-sequence {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            align-items: flex-start;
        }

        .stroke-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        .practice-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        /* ç¬”ç”»æ¼”ç¤ºæ ¼å­ - å°å·æ— ç”°å­—æ ¼ */
        .grid-container-small {
            position: relative;
            width: 22px;
            height: 22px;
            border: 1px solid #ddd;
            background: white;
        }

        /* ç»ƒä¹ æ ¼å­ - å¸¦ç”°å­—æ ¼ */
        .grid-container {
            position: relative;
            width: 45px;
            height: 45px;
            border: 1px solid #4CAF50;
            background: white;
        }

        /* ç”°å­—æ ¼æ ·å¼ - åªç”¨äºç»ƒä¹ æ ¼å­ */
        .grid-container .grid-line-h,
        .grid-container .grid-line-v {
            position: absolute;
            background: none;
        }

        .grid-container .grid-line-h {
            width: 100%;
            height: 0;
            top: 50%;
            left: 0;
            border-top: 1px dashed #4CAF50;
        }

        .grid-container .grid-line-v {
            width: 0;
            height: 100%;
            top: 0;
            left: 50%;
            border-left: 1px dashed #4CAF50;
        }

        .stroke-label {
            font-size: 7px;
            color: #999;
            line-height: 1;
        }

        .practice-label {
            font-size: 9px;
            color: #666;
            line-height: 1;
        }

        /* æçº¢æ ¼å’Œçº¯ç»ƒæ ¼æ ·å¼åŒºåˆ† */
        .practice-item:has(.practice-label:contains('æçº¢')) .grid-container {
            background: #fffef8; /* æçº¢æ ¼ç•¥å¸¦ç±³é»„è‰² */
        }

        .practice-item:has(.practice-label:contains('ç»ƒä¹ ')) .grid-container {
            background: white; /* çº¯ç»ƒæ ¼çº¯ç™½è‰² */
        }

        .no-content {
            text-align: center;
            padding: 60px 20px;
            color: #999;
            font-size: 1.2em;
        }

        .no-content::before {
            content: "âœï¸";
            display: block;
            font-size: 4em;
            margin-bottom: 20px;
        }

        .hint {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 12px 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            font-size: 14px;
            color: #333;
        }

        .hint strong {
            color: #2196F3;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #667eea;
            font-size: 16px;
        }

        /* é¡µè„šæ ·å¼ */
        .footer {
            background: #f8f9fa;
            border-top: 2px solid #e9ecef;
            padding: 30px;
            margin-top: 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-section h4 {
            color: #333;
            font-size: 16px;
            margin-bottom: 12px;
            font-weight: bold;
        }

        .footer-section ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-section li {
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .footer-section a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        .footer-section a:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        .footer-section .description {
            color: #666;
            font-size: 14px;
        }

        .footer-section p {
            color: #666;
            font-size: 14px;
            line-height: 1.6;
            margin: 8px 0;
        }

        .github-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: #24292e;
            color: white !important;
            border-radius: 8px;
            font-size: 14px;
            margin-top: 10px;
            transition: all 0.3s;
        }

        .github-link:hover {
            background: #333;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            text-decoration: none !important;
        }

        .footer-note {
            color: #999;
            font-size: 12px;
            font-style: italic;
        }

        /* æ‰“å°æ ·å¼ */
        @media print {
            body {
                background: white;
                padding: 0;
            }

            .container {
                box-shadow: none;
                border-radius: 0;
                max-width: 100%;
            }

            .header,
            .control-panel,
            .footer {
                display: none;
            }

            .preview-area {
                padding: 8mm;
            }

            /* é»˜è®¤åŒåˆ— */
            .preview-area.print-layout-2 {
                column-count: 2;
                column-gap: 10mm;
            }

            /* å•åˆ— */
            .preview-area.print-layout-1 {
                column-count: 1;
            }

            .char-row {
                margin-bottom: 10px;
                padding-bottom: 8px;
                page-break-inside: avoid;
                break-inside: avoid;
                display: inline-block;
                width: 100%;
            }

            .char-header {
                margin-bottom: 4px;
                gap: 6px;
            }

            .char-title {
                font-size: 24px;
            }

            .char-pinyin {
                font-size: 10px;
            }

            .section-label {
                display: none; /* éšè—"ç¬”ç”»é¡ºåº"æ ‡ç­¾ï¼ŒèŠ‚çœç©ºé—´ */
            }

            .stroke-sequence {
                gap: 2px;
            }
            
            .stroke-label {
                font-size: 6px;
            }

            .practice-sequence {
                gap: 4px;
            }

            .stroke-label,
            .practice-label {
                font-size: 7px;
            }

            /* ç¬”ç”»æ¼”ç¤ºæ ¼å­ - æ‰“å°æ—¶æ›´å° */
            .grid-container-small {
                width: 15px;
                height: 15px;
            }

            /* ç»ƒä¹ æ ¼å­ - ä¿æŒåˆé€‚å¤§å° */
            .grid-container {
                width: 28px;
                height: 28px;
            }

            .char-info {
                min-width: 50px;
            }

            .practice-demo-section {
                margin-top: 4px;
            }

            .stroke-sequence,
            .practice-sequence {
                max-width: 100%;
            }

            @page {
                size: A4 portrait;
                margin: 12mm 8mm;
            }
        }

        /* å°å±å¹•é€‚é… */
        @media (max-width: 768px) {
            .grid-container {
                width: 80px;
                height: 80px;
            }

            .stroke-sequence {
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ–Œï¸ å–µå­—å¸–</h1>
            <p>çœ‹æ‹¼éŸ³ã€å­¦ç¬”ç”»ã€ç»ƒä¹¦å†™ï¼Œä¸€ç¬”ä¸€åˆ’å†™å¥½å­—</p>
            <div style="margin-top: 15px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                <a href="chaozi.html" class="nav-link">âœï¸ æŠ„å­—æ¨¡å¼</a>
                <a href="pinyin.html" class="nav-link">ğŸ“– æ–‡ç« æ³¨éŸ³</a>
            </div>
        </div>

        <div class="control-panel">
            <div class="hint">
                <strong>ğŸ’¡ ä½¿ç”¨è¯´æ˜ï¼š</strong>æ¯ä¸ªæ±‰å­—æ˜¾ç¤ºæ‹¼éŸ³å’Œç¬”ç”»é¡ºåºï¼Œä¸‹æ–¹å¤§æ ¼å­ç”¨äºæçº¢ç»ƒä¹ ã€‚ä¸Šæ–¹çœ‹ã€ä¸‹æ–¹å†™ï¼Œéå¸¸é€‚åˆå°æœ‹å‹å­¦ä¹ ï¼
            </div>

            <div class="input-group">
                <label for="charInput">è¾“å…¥è¦ç»ƒä¹ çš„æ–‡å­—ï¼š</label>
                <textarea id="charInput" rows="2" placeholder="è¯·è¾“å…¥è¦ç»ƒä¹ çš„æ±‰å­—ï¼Œä¾‹å¦‚ï¼šæ˜¥å¤ç§‹å†¬ æˆ– ä¸€äºŒä¸‰å››äº”"></textarea>
            </div>

            <div class="options-group">
                <div class="option-item">
                    <label>é€‰æ‹©å¹´çº§ï¼š</label>
                    <select id="gradeSelect">
                        <option value="all">å…¨éƒ¨å¹´çº§</option>
                        <option value="1-1" selected>ä¸€å¹´çº§ä¸Šå†Œ</option>
                        <option value="1-2">ä¸€å¹´çº§ä¸‹å†Œ</option>
                        <option value="2-1">äºŒå¹´çº§ä¸Šå†Œ</option>
                        <option value="2-2">äºŒå¹´çº§ä¸‹å†Œ</option>
                        <option value="3-1">ä¸‰å¹´çº§ä¸Šå†Œ</option>
                        <option value="3-2">ä¸‰å¹´çº§ä¸‹å†Œ</option>
                        <option value="4-1">å››å¹´çº§ä¸Šå†Œ</option>
                        <option value="4-2">å››å¹´çº§ä¸‹å†Œ</option>
                        <option value="5-1">äº”å¹´çº§ä¸Šå†Œ</option>
                        <option value="5-2">äº”å¹´çº§ä¸‹å†Œ</option>
                        <option value="6-1">å…­å¹´çº§ä¸Šå†Œ</option>
                        <option value="6-2">å…­å¹´çº§ä¸‹å†Œ</option>
                    </select>
                </div>

                <div class="option-item">
                    <label>æ‰“å°å¸ƒå±€ï¼š</label>
                    <select id="printLayout">
                        <option value="2" selected>åŒåˆ—æ‰“å°</option>
                        <option value="1">å•åˆ—æ‰“å°</option>
                    </select>
                </div>

                <div class="option-item">
                    <label>å¤§å°ï¼š</label>
                    <input type="number" id="gridSize" value="45" min="35" max="70" step="5">
                    <span>åƒç´ </span>
                </div>

                <div class="option-item">
                    <label>é€æ˜åº¦ï¼š</label>
                    <input type="number" id="opacity" value="25" min="10" max="60" step="5">
                    <span>%</span>
                </div>

                <div class="option-item">
                    <label>ææ ¼æ•°é‡ï¼š</label>
                    <input type="number" id="traceCount" value="4" min="0" max="15">
                    <span style="font-size: 12px; color: #999;">ï¼ˆæœ‰æŒ‡å¯¼ï¼‰</span>
                </div>

                <div class="option-item">
                    <label>ç»ƒæ ¼æ•°é‡ï¼š</label>
                    <input type="number" id="blankCount" value="2" min="0" max="15">
                    <span style="font-size: 12px; color: #999;">ï¼ˆç©ºç™½ï¼‰</span>
                </div>

                <div class="option-item">
                    <label>éšæœºå­—æ•°ï¼š</label>
                    <input type="number" id="randomCount" value="16" min="1" max="50">
                </div>
            </div>

            <div class="button-group">
                <button class="btn-primary" onclick="generateSheet()">ç”Ÿæˆç»ƒå­—å¸–</button>
                <button class="btn-secondary" onclick="generateRandom()">éšæœºç”Ÿæˆ</button>
                <button class="btn-print" onclick="printSheet()">æ‰“å°ç»ƒå­—å¸–</button>
            </div>
        </div>

        <div class="preview-area" id="previewArea">
            <div class="no-content">
                è¯·è¾“å…¥æ–‡å­—æˆ–ç‚¹å‡»"éšæœºç”Ÿæˆ"å¼€å§‹åˆ¶ä½œç»ƒå­—å¸–
            </div>
        </div>

        <footer class="footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>ğŸ“ åŸºäºå¼€æºæŠ€æœ¯</h4>
                    <ul>
                        <li>
                            <a href="https://hanziwriter.org/" target="_blank" rel="noopener noreferrer">
                                Hanzi Writer
                            </a>
                            <span class="description">- æ±‰å­—ç¬”ç”»åŠ¨ç”»åº“</span>
                        </li>
                        <li>
                            <a href="https://github.com/zh-lx/pinyin-pro" target="_blank" rel="noopener noreferrer">
                                Pinyin Pro
                            </a>
                            <span class="description">- æ‹¼éŸ³è½¬æ¢åº“</span>
                        </li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>ğŸ“¦ å¼€æºé¡¹ç›®</h4>
                    <p>
                        æœ¬é¡¹ç›®å·²åœ¨ GitHub å¼€æºï¼Œæ¬¢è¿ Starã€Fork å’Œè´¡çŒ®ï¼
                    </p>
                    <a href="https://github.com/caicaicai/miaozitie" target="_blank" rel="noopener noreferrer" class="github-link">
                        <svg height="20" width="20" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                        </svg>
                        GitHub: caicaicai/miaozitie
                    </a>
                </div>
                <div class="footer-section">
                    <h4>ğŸ“„ è®¸å¯è¯</h4>
                    <p>MIT License Â© 2024</p>
                    <p class="footer-note">
                        ä¸“ä¸ºå°å­¦ç”Ÿè®¾è®¡çš„åœ¨çº¿ç»ƒå­—å¸–ç”Ÿæˆå·¥å…·<br>
                        æ”¯æŒä¸€åˆ°å…­å¹´çº§ç”Ÿå­—åº“ï¼Œå…±2500+ä¸ªæ±‰å­—
                    </p>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // å°å­¦ç”Ÿå­—åº“ï¼ˆæŒ‰å¹´çº§åˆ†ç±»ï¼‰
        const gradeChars = {
            '1-1': ['ä¸€', 'äºŒ', 'ä¸‰', 'å', 'æœ¨', 'ç¦¾', 'ä¸Š', 'ä¸‹', 'åœŸ', 'ä¸ª', 'å…«', 'å…¥', 'å¤§', 'å¤©', 'äºº', 'ç«', 'æ–‡', 'å…­', 'ä¸ƒ', 'å„¿', 'ä¹', 'æ— ', 'å£', 'æ—¥', 'ä¸­', 'äº†', 'å­', 'é—¨', 'æœˆ', 'ä¸', 'å¼€', 'å››', 'äº”', 'ç›®', 'è€³', 'å¤´', 'ç±³', 'è§', 'ç™½', 'ç”°', 'ç”µ', 'ä¹Ÿ', 'é•¿', 'å±±', 'å‡º', 'é£', 'é©¬', 'é¸Ÿ', 'äº‘', 'å…¬', 'è½¦', 'ç‰›', 'ç¾Š', 'å°', 'å°‘', 'å·¾', 'ç‰™', 'å°º', 'æ¯›', 'åœ', 'åˆ', 'å¿ƒ', 'é£', 'åŠ›', 'æ‰‹', 'æ°´', 'å¹¿', 'å‡', 'è¶³', 'èµ°', 'æ–¹', 'åŠ', 'å·´', 'ä¸š', 'æœ¬', 'å¹³', 'ä¹¦', 'è‡ª', 'å·²', 'ä¸œ', 'è¥¿', 'å›', 'ç‰‡', 'çš®', 'ç”Ÿ', 'é‡Œ', 'æœ', 'å‡ ', 'ç”¨', 'é±¼', 'ä»Š', 'æ­£', 'é›¨', 'ä¸¤', 'å¹´', 'å·¦', 'å³'],
            
            '1-2': ['ä¸‡', 'ä¸', 'å†¬', 'ç™¾', 'é½', 'è¯´', 'è¯', 'æœ‹', 'å‹', 'æ˜¥', 'é«˜', 'ä½ ', 'ä»¬', 'çº¢', 'ç»¿', 'èŠ±', 'è‰', 'çˆ·', 'èŠ‚', 'å²', 'äº²', 'çš„', 'è¡Œ', 'å¤', 'å£°', 'å¤š', 'å¤„', 'çŸ¥', 'å¿™', 'æ´—', 'è®¤', 'æ‰«', 'çœŸ', 'çˆ¶', 'æ¯', 'çˆ¸', 'å…¨', 'å…³', 'å†™', 'å®Œ', 'å®¶', 'çœ‹', 'ç€', 'ç”»', 'ç¬‘', 'å…´', 'ä¼š', 'å¦ˆ', 'å¥¶', 'åˆ', 'åˆ', 'æ”¾', 'æ”¶', 'å¥³', 'å¤ª', 'æ°”', 'æ—©', 'å»', 'äº®', 'å’Œ', 'è¯­', 'åƒ', 'æ', 'ç§€', 'é¦™', 'å¬', 'å”±', 'è¿', 'è¿œ', 'å®š', 'å‘', 'ä»¥', 'å', 'æ›´', 'ä¸»', 'æ„', 'æ€»', 'å…ˆ', 'å¹²', 'èµ¶', 'èµ·', 'æ˜', 'å‡€', 'åŒ', 'å·¥', 'ä¸“', 'æ‰', 'çº§', 'é˜Ÿ', 'èš‚', 'èš', 'å‰', 'ç©º', 'æˆ¿', 'ç½‘', 'è¯—', 'æ—', 'ç«¥', 'é»„', 'é—­', 'ç«‹', 'æ˜¯', 'æœµ', 'ç¾', 'æˆ‘', 'å¶', 'æœº', 'å¥¹', 'ä»–', 'é€', 'è¿‡', 'æ—¶', 'è®©', 'å—', 'å§', 'è™«', 'å¾€', 'å¾—', 'å¾ˆ', 'æ²³', 'å§', 'å€Ÿ', 'å‘¢', 'å‘€', 'å“ª', 'è°', 'æ€•', 'è·Ÿ', 'å‡‰', 'é‡', 'æœ€', 'å›­', 'å› ', 'ä¸º', 'è„¸', 'é˜³', 'å…‰', 'å¯', 'çŸ³', 'åŠ', 'æ³•', 'æ‰¾', 'è®¸', 'åˆ«', 'åˆ°', 'é‚£', 'éƒ½', 'å“', 'å«', 'å†', 'è±¡', 'åƒ', 'åš', 'ç‚¹', 'ç…§', 'æ²™', 'æµ·', 'æ¡¥', 'ç«¹', 'å†›', 'è‹—', 'äº•', 'ä¹¡', 'é¢', 'å¿˜', 'æƒ³', 'å¿µ', 'ç‹', 'ä»', 'è¾¹', 'è¿™', 'è¿›', 'é“', 'è´', 'åŸ', 'ç”·', 'çˆ±', 'è™¾', 'è·‘', 'å¹', 'åœ°', 'å¿«', 'ä¹', 'è€', 'å¸ˆ', 'çŸ­', 'å¯¹', 'å†·', 'æ·¡', 'çƒ­', 'æƒ…', 'æ‹‰', 'æŠŠ', 'ç»™', 'æ´»', 'ç§', 'åƒ', 'ç»ƒ', 'ä¹ ', 'è‹¦', 'å­¦', 'é', 'å¸¸', 'é—®', 'é—´', 'ä¼™', 'ä¼´', 'å…±', 'æ±½', 'åˆ†', 'è¦', 'æ²¡', 'ä½', 'å­©', 'é€‰', 'åŒ—', 'å—', 'æ±Ÿ', 'æ¹–', 'ç§‹', 'åª', 'æ˜Ÿ', 'é›ª', 'å¸®', 'è¯·', 'å°±', 'çƒ', 'ç©', 'è·³', 'æ¡ƒ', 'æ ‘', 'åˆš', 'å…°', 'å„', 'å', 'åº§', 'å¸¦', 'æ€¥', 'å', 'å‘', 'æˆ', 'æ™š', 'åŠ¨', 'æ–°', 'æœ‰', 'åœ¨', 'ä»€', 'ä¹ˆ', 'å˜', 'æ¡'],
            
            '2-1': ['å®œ', 'å®', 'è‰²', 'å', 'è°·', 'é‡‘', 'å°½', 'å±‚', 'ä¸°', 'å£®', 'æ³¢', 'æµª', 'ç¯', 'ä½œ', 'å­—', 'è‹¹', 'ä¸½', 'åŠ³', 'å°¤', 'å…¶', 'åŒº', 'å·¨', 'å®ƒ', 'å®‰', 'å—', 'ç«™', 'å·²', 'ç”²', 'è±†', 'è¯†', 'çº·', 'ç»', 'å¦‚', 'å¥½', 'å¨ƒ', 'æ´¼', 'äº', 'é¦–', 'æ', 'æ«', 'è®°', 'åˆ˜', 'èƒ¡', 'æˆ', 'æ£‹', 'é’¢', 'è§‚', 'å¼¹', 'ç´', 'å…»', 'ä¼‘', 'ä¼¸', 'ç”œ', 'æ­Œ', 'é™¢', 'é™¤', 'æ¯', 'æ‚¨', 'ç‰µ', 'å›°', 'å‘˜', 'é’', 'å®', 'å®¤', 'æ ·', 'æ ¡', 'åˆ‡', 'æ•™', 'å“', 'ç­', 'æ¬ ', 'å…ƒ', 'åŒ…', 'é’Ÿ', 'å¹', 'å“ˆ', 'è¿Ÿ', 'é—¹', 'åŠ', 'èº«', 'ä»”', 'ç»†', 'æ¬¡', 'å¤–', 'è®¡', 'æ€¦', 'ç¤¼', 'åŠ ', 'å¤•', 'ä¸', 'å·', 'å·', 'å°', 'äº‰', 'æ°‘', 'æ—', 'äº¿', 'æ´', 'æ¬¢', 'ç¥–', 'æ——', 'å¸œ', 'åº†', 'æ›²', 'å¤®', 'äº¤', 'å¸‚', 'æ—', 'ä¼˜', 'é˜´', 'å›', 'åŸ', 'å›½', 'å›¾', 'ç”³', 'åŒ¹', 'äº’', 'äº¬', 'æ³ª', 'æ´‹', 'æ‹¥', 'æŠ±', 'ç›¸', 'æ‰¬', 'è®²', 'æ‰“', 'æŒ‡', 'æ¥', 'æƒŠ', 'æ•…', 'ä¾¯', 'å¥‡', 'å¯¸', 'è½', 'è¡¥', 'æ‹”', 'åŠŸ', 'åŠ©', 'å–', 'æ‰€', 'ä¿¡', 'æ²¿', 'æ‹¾', 'é™…', 'è›™', 'é”™', 'ç­”', 'è¿˜', 'è¨€', 'æ¯', 'æ²»', 'æ£µ', 'æŒ‚', 'å“‡', 'æ€ª', 'æ…¢', 'æ€', 'æ€', 'ç©¿', 'å¼¯', 'æ¯”', 'æœ', 'æµ…', 'æ¼‚', 'å•¦', 'å•Š', 'å¤«', 'è¡¨', 'ç¤º', 'å·', 'æ±—', 'ä¼¤', 'å¸', 'æ', 'ä¸²', 'å…', 'å‘Š', 'è¯‰', 'ç‹', 'ç‹¸', 'çŒ´', 'é¢—', 'æ–¤', 'æŠ˜', 'æŒ‘', 'æ ¹', 'ç‹¬', 'æ»¡', 'å®¹', 'æ˜“', 'é‡‡', 'èƒŒ', 'æ¿', 'æ¤…', 'ä½†', 'å‚', 'æ¸…', 'æ¶ˆ', 'ç”±', 'æœ¯', 'å', 'æ³¨', 'è¯¾', 'é“…', 'ç¬”', 'æ¡Œ', 'æ™¯', 'æ‹¿', 'å', 'æ¾', 'æ‰', 'æŠ“', 'ç¥', 'ç¦', 'å¥', 'å¹¸', 'ä¹‹', 'ä»¤', 'å¸ƒ', 'ç›´', 'å½“', 'ç¬¬', 'ç°', 'æœŸ', 'è½®', 'è·¯', 'æˆ·', 'äºš', 'è§’', 'å‘¨', 'åºŠ', 'ç—…', 'å§‹', 'å¼ ', 'å¯»', 'å“­', 'è‰¯', 'é£Ÿ', 'åŒ', 'ä½“', 'æ“', 'åœº', 'ä»½', 'ç²‰', 'æ˜¨', 'æ™´', 'å§‘', 'å¨˜', 'å¦¹', 'è¯»', 'èˆŸ', 'ä¹˜', 'éŸ³', 'å®¢', 'ä½•', 'æ±ª', 'ä¸›', 'ç‰¢', 'æ‹', 'æŠ¤', 'ä¿', 'ç‰©', 'é¸¡', 'çŒ«', 'ç¾½', 'é¢†', 'æ‰', 'ç†', 'è·ƒ', 'è¹¦', 'çµ', 'æ™¨', 'å¤±', 'è§‰', 'æ‰”', 'æ‰', 'çœ¼', 'ç›', 'çº¸', 'èˆ¹', 'ä¹…', 'ä¹', 'è‡³', 'æ­»', 'è…°', 'æ¡', 'ç²’', 'è¢«', 'å¹¶', 'å¤œ', 'å–œ', 'é‡', 'å‘³', 'è½»', 'åˆ»', 'ç¾¤', 'å«', 'è¿', 'å®‡', 'å®™', 'èˆª', 'èˆ°', 'å†²', 'æ™’', 'æ± ', 'æµ®', 'ç¾', 'å®³', 'é»‘', 'å™¨', 'å²¸', 'çº¹', 'æ´', 'å½±', 'å€’', 'æ¸¸', 'åœ†', 'å›´', 'æ¯', 'ä»¶', 'ä½', 'é¡»', 'èƒ½', 'é£˜', 'å¿…', 'äº‹', 'å†', 'å²', 'ç­', 'å…‹', 'åŒ–', 'ä»£', 'å­™', 'æ¤', 'å‚', 'äº§', 'ä»‹', 'å†œ', 'ç§‘', 'æŠ€', 'çºº', 'ç»‡'],
            
            '2-2': ['è„±', 'å†»', 'æºª', 'æ£‰', 'æ¢', 'æ‘‡', 'é‡', 'èº²', 'è§£', 'æœª', 'è¿½', 'åº—', 'æ¯', 'å¾', 'çƒ§', 'è£', 'èœ', 'å®¿', 'å†ˆ', 'ä¸–', 'ç•Œ', 'è½°', 'ç¬‹', 'èŠ½', 'å–Š', 'å‘¼', 'å”¤', 'å¼Ÿ', 'å“¥', 'éª¨', 'æŠ½', 'æ‹', 'æµ‡', 'ç»ˆ', 'é™', 'èºº', 'è°¢', 'æ¸', 'å¾®', 'ç“¦', 'æ³‰', 'ç„¶', 'ç»“', 'è‚¡', 'è„†', 'å¡”', 'æœ', 'é¹ƒ', 'å†’', 'é›·', 'éœ€', 'è¿ˆ', 'è¿·', 'è¿¹', 'å”', 'é”‹', 'æ»´', 'æ´’', 'æ³¥', 'æ³', 'æ‰‘', 'æ‰˜', 'æ‘¸', 'åˆ©', 'é“ƒ', 'å¼±', 'æœ«', 'èŠ¬', 'èŠ³', 'å¤', 'åº”', 'è¯¥', 'å²›', 'å±•', 'å»º', 'çº±', 'ç¯', 'ç»•', 'èƒœ', 'éš', 'çº¦', 'çœ', 'èŒ‚', 'ç››', 'å¾', 'å­£', 'ç•™', 'æ', 'å¯†', 'èœœ', 'å¡', 'æ­', 'æ‘˜', 'é’‰', 'æ²Ÿ', 'å¤Ÿ', 'é¾™', 'æ©', 'å¯¿', 'æŸ', 'æ³¼', 'ç‰¹', 'æ•¬', 'é²œ', 'è„š', 'åº¦', 'å‡¤', 'å‡°', 'æŸ', 'å‹¾', 'åºœ', 'å•', 'å¤º', 'å®«', 'æ‰®', 'é›„', 'ä¼Ÿ', 'çƒ', 'è¾‰', 'ç…Œ', 'è‰²', 'å¦', 'å¿—', 'é¢˜', 'æ', 'æ¼«', 'æœ—', 'å“„', 'å–', 'éª—', 'åˆ€', 'å°”', 'æ±‚', 'ä»', 'ä½¿', 'ä¾¿', 'è‹±', 'ç¥¨', 'æ•´', 'å¼', 'è€Œ', 'ä¸”', 'ä¸¹', 'ä¹Œ', 'è‰º', 'æ˜¾', 'å¿½', 'ä¸', 'æ†', 'çœ¨', 'æ¶›', 'é™ˆ', 'è½¬', 'æ–œ', 'å´', 'å«', 'çª—', 'ç‚‰', 'å²­', 'é¸£', 'ç»', 'é“¶', 'çƒŸ', 'æ³Š', 'æµ', 'æŸ³', 'å‚', 'ä¹±', 'æ²‰', 'å‹', 'é€ƒ', 'è¶Š', 'é˜µ', 'å½©', 'è™¹', 'è‰', 'èœ˜', 'è››', 'å†Œ', 'å²©', 'å®', 'è¶´', 'å°', 'åˆ¨', 'åŸ‹', 'é™†', 'é“', 'è´¨', 'åš', 'åº•', 'å¿ ', 'å¯¼', 'ç›', 'ç§¯', 'ç¨ ', 'ç¨€', 'é’ˆ', 'ç¢°', 'æ…Œ', 'å…„', 'å‘†', 'å•†', 'æŠ¹', 'æŒ¤', 'æ‹±', 'å†³', 'ä»·', 'é’±', 'è´­', 'æ‰¹', 'è¯„', 'æŠ¥', 'ç»', 'ç’ƒ', 'æ‹¾', 'ç ´', 'ç¢', 'æ»‘', 'ç»§', 'ç»­', 'å°', 'éª„', 'å‚²', 'æ‹', 'æ¡¶', 'åœ', 'èª', 'èƒ³', 'è†Š', 'ç”¸', 'æ™ƒ', 'è¡', 'å­', 'ç²', 'ç‹—', 'ç³Ÿ', 'æ¥¼', 'æ¢¯', 'è‚¯', 'è„‘', 'ç­‹', 'è®¶', 'è°ˆ', 'æ´¾', 'å¼•', 'åˆ—', 'å³°', 'æ•²', 'é™„', 'è¿‘', 'å®ˆ', 'ä¸¢', 'ç„¦', 'è´¹', 'æœ›', 'ç®—', 'æ­¤', 'æ¡©', 'è‚¥', 'ç°', 'è®¨', 'åŒ', 'å†°', 'è›‹', 'å£³', 'é¸­', 'æ¬º', 'è´Ÿ', 'é¹…', 'ç¿…', 'è†€', 'å‹º', 'æ–—', 'ç‰', 'ç»„', 'ç', 'ç ', 'æ•°', 'é’»', 'ç ”', 'ç¡', 'è·', 'ç¦»', 'æ²¹', 'æ£€', 'æŸ¥', 'å›¢', 'æ–¥', 'è´£', 'ç‚', 'å¤¸', 'å¥–', 'äº¡', 'è‚‰', 'è€', 'è°œ', 'ä¼ ', 'æŸ“', 'ç±»', 'ä¸¥', 'å¯’'],
            
            '3-1': ['åª', 'å', 'æˆ´', 'æ‹›', 'è´', 'è¶', 'å­”', 'é›€', 'èˆ', 'é“œ', 'ç²—', 'å°¾', 'è¦', 'è£…', 'åŠ²', 'ç»’', 'æœ', 'äº›', 'é’“', 'å¯Ÿ', 'ç“£', 'æ‹¢', 'æŒ', 'è¶£', 'çˆ¬', 'å³°', 'é¡¶', 'ä¼¼', 'è‹', 'ä»°', 'å’±', 'å¥‹', 'è¾«', 'å‹‡', 'å±…', 'éƒŠ', 'æ•£', 'æ­¥', 'èƒ¸', 'è„¯', 'æ¸£', 'æˆ–', 'è€…', 'æ•¢', 'æƒœ', 'ä½', 'è¯š', 'åŸº', 'çª', 'æŒ‰', 'æ‘†', 'å¼„', 'å‡†', 'å¤‡', 'ä¾§', 'èƒ¶', 'å·', 'è¾†', 'ç§˜', 'æ‚', 'ç¤¾', 'è‘—', 'è—', 'æ‚„', 'é—ª', 'å‘', 'è‡£', 'æ¨', 'æ—…', 'è€ƒ', 'ç§¦', 'çºª', 'é—', 'ç©¶', 'éœ‡', 'ä¿ƒ', 'æ·±', 'å¿†', 'å¼‚', 'é€¢', 'ä½³', 'å€', 'é¥', 'é', 'æ’', 'ç²¾', 'å¸Œ', 'å´', 'ä¾', 'æ‹¼', 'å‘½', 'å¥”', 'æ‘', 'æŠ–', 'ä¸§', 'ç£¨', 'åŠ', 'æ‰‡', 'æš', 'é‚®', 'çˆ½', 'æŸ¿', 'ä»™', 'æ¢¨', 'è ', 'è', 'ç²®', 'ç´§', 'æ¨', 'è‰³', 'å†…', 'æ¢¦', 'é†’', 'è‹', 'æ¹¿', 'å¨‡', 'å«©', 'å¼º', 'é€‚', 'æ˜†', 'æ’­', 'ä¿®', 'è‡´', 'è®º', 'è¯•', 'éªŒ', 'è¢‹', 'è¯', 'æ¦‚', 'å‡', 'é˜»', 'æµ‹', 'æ‹¬', 'ç¡®', 'è¯¯', 'é€”', 'è¶…', 'å ‚', 'é•œ', 'é—²', 'å¾…', 'é˜…', 'è…¿', 'éš', 'è°ƒ', 'ç®€', 'æ‹œ', 'è®¿', 'å…·', 'é—»', 'å°˜', 'ä»†', 'çº³', 'é—·', 'ä¸˜', 'è¿', 'ç­‰', 'æ­¢', 'å¢ƒ', 'æˆ', 'å“', 'æš—', 'é™', 'ä¸ˆ', 'è‚¢', 'è‚Œ', 'è‚¤', 'è¾½', 'é˜”', 'è¡€', 'æ¶²', 'æ»‹', 'æ¶¦', 'åˆ›', 'é€ ', 'å¿', 'è®¾', 'å‚', 'éƒ¨', 'æ¨ª', 'è·¨', 'ä¸¾', 'å‡»', 'åš', 'å›º', 'æ ', 'æ¡ˆ', 'çˆª', 'è´µ', 'æ–­', 'æ¥š', 'å­¤', 'å¸†', 'è“', 'æ‡’', 'æŠ«', 'åˆ’', 'å¨', 'æ­¦', 'æ‹£', 'é¡”', 'å½¢', 'çŠ¶', 'æ¸”', 'æ–™', 'è¾ˆ', 'æ±‡', 'æ¬£', 'èµ', 'æ˜ ', 'æŒ¡', 'è§†', 'çº¿', 'æµ¸', 'çŒ®', 'è¯', 'æ', 'è½¯', 'åˆ®', 'èˆŒ', 'çŸ›', 'ç›¾', 'é›†', 'æŒ', 'èˆ¬', 'æ¶', 'é¾Ÿ', 'æ”»', 'ç‚®', 'å¦', 'æˆ˜', 'ç¥', 'å…µ', 'é€€', 'æŒ–', 'é‹', 'æ–§', 'é”¯', 'å…', 'å±‹', 'æŠ¢', 'éš¾', 'åˆ', 'ç®¡', 'æ•Œ', 'é˜¶', 'æ‡‚', 'é™¶', 'è°¦', 'è™š', 'å˜´', 'æ¼', 'æ€’', 'åµ', 'æ„Ÿ', 'è’', 'æ§', 'æœ´', 'ç´ ', 'å€¼', 'å—', 'æ„¿', 'å§¿', 'åŠ¿', 'æŠ•', 'å†µ', 'å', 'çƒˆ', 'ç»ª', 'è¿°', 'æ™®', 'é€š', 'é¼“', 'åŠ±', 'è‚²', 'ç“¶', 'ç³»', 'ç»³', 'èŒ¶', 'å±', 'é™©', 'é¡º', 'ä¿©', 'ç´¢', 'æ¿€', 'å µ', 'è·', 'äºˆ', 'æ‹…', 'å®½', 'è£•', 'ä¹°', 'çŒœ', 'ç³–', 'å³', 'å¡', 'ç›¼', 'ä»', 'è´´'],
            
            '3-2': ['ç‡•', 'èš', 'å¢', 'æ ', 'ç¨»', 'å°–', 'å¶', 'æ²¾', 'åœˆ', 'æ¼¾', 'å€¦', 'ç¬¦', 'æ¼”', 'èµ', 'å’', 'ç¢§', 'å¦†', 'è£', 'å‰ª', 'æ»¨', 'ç´«', 'è·', 'æŒ¨', 'è²', 'è“¬', 'è´¦', 'ä»¿', 'ä½›', 'è£³', 'ç¿©', 'è¹ˆ', 'èœ»', 'èœ“', 'ç¿ ', 'ç§†', 'è…¹', 'èµ¤', 'è¡¬', 'è¡«', 'é€', 'æ³›', 'æ³¡', 'é¥²', 'ç¿', 'é™¡', 'å£', 'æ¬§', 'æ´²', 'ç‘', 'å£«', 'èˆ’', 'å¯', 'æ®Š', 'éª¤', 'æ¶‰', 'ç–²', 'æ”¿', 'è¸', 'æ•‘', 'è½½', 'æ£®', 'éƒ', 'è‘±', 'æ¹›', 'ç›–', 'çŠ', 'ç ', 'è£¸', 'æ‰©', 'æ ‹', 'æŸ´', 'å–˜', 'é»', 'å¯“', 'åˆ™', 'çªŸ', 'çª¿', 'ç‹¼', 'å¼', 'è¡—', 'åŠ', 'æ‚”', 'ç›˜', 'ç¼ ', 'ç¡¬', 'å¼“', 'é­', 'å°„', 'ç®­', 'çŒ', 'é›', 'å¼¦', 'æ‚²', 'æƒ¨', 'æ„ˆ', 'ç—›', 'è£‚', 'å®', 'å˜±', 'æ’', 'é ', 'å¹…', 'å®¡', 'è‚ƒ', 'æ™Œ', 'æ‚¦', 'ç†Ÿ', 'æ‚‰', 'è¯²', 'èµ›', 'ç–¼', 'å¿§', 'æ…°', 'æ¢­', 'è™½', 'ç‹‚', 'èµ¢', 'æš‘', 'ç›Š', 'ç©·', 'å°†', 'è‹¥', 'ä¿±', 'åš', 'é¸¦', 'æˆª', 'ä¼', 'é»˜', 'å±€', 'æ£’', 'ç¾¡', 'æ…•', 'ç¦', 'å¸­', 'ä¼—', 'çº ', 'åŒ ', 'æ›¿', 'æŠ„', 'å¢¨', 'éª‚', 'ç¼©', 'æ‰¿', 'è‚©', 'æ‰›', 'ç¼˜', 'æ„¤', 'æ¯•', 'æˆ’', 'æ—¢', 'è´º', 'é¡¾', 'è¿…', 'é€Ÿ', 'å¤', 'æ°', 'çŠ¯', 'ç¼“', 'å©†', 'è®®', 'è¾¾', 'ç¨š', 'çƒ¦', 'äº«', 'ç‚¸', 'åŒ»', 'è¾“', 'çœ‰', 'å‹', 'å¦', 'å«', 'é…’', 'æ©', 'å’¬', 'æ‹³', 'åˆ¶', 'æŸ”', 'æ¸´', 'ç½', 'ç´¯', 'ç«Ÿ', 'åŒ†', 'å“€', 'èˆ”', 'å', 'é€’', 'å¿', 'å‡‘', 'å’½', 'å”¾', 'æ²«', 'æ¶Œ', 'å·®', 'æŠµ', 'æ°', 'åº„', 'ç¨¼', 'å…½', 'å­˜', 'ç¹', 'æ®–', 'è”¬', 'éº»', 'è¾ƒ', 'æ€', 'é¢„', 'å¹•', 'ä¸´', 'æ‚¬', 'æ›¾', 'å¥¥', 'åŠª', 'ç™»', 'ä»»', 'æ’’', 'è—»', 'æ—¦', 'é¡¹', 'ä¼°', 'é¾„', 'ç»œ', 'ç®±', 'è¿«', 'æ‚Ÿ', 'ç›¯', 'é¼ ', 'å”', 'è­¦', 'çœ¯', 'è§ˆ', 'æ•', 'å¯„', 'ç§’', 'æ‹', 'å½¤', 'éœ', 'é™ª', 'è¶', 'çª„', 'è„–', 'æ®µ', 'æ¼†', 'èƒ†', 'è¸ª', 'é•‡', 'æ‘Š', 'é¼»', 'å¿§', 'æ¢', 'æ‘”', 'ç«–', 'å–', 'å”®', 'é©®', 'æ„', 'ç«¯', 'æ', 'é¦†', 'é¥­', 'è¾¨', 'å †', 'æ¨¡', 'ä»˜', 'æ ‡', 'é½¿', 'ä¹', 'å·§', 'éœ„', 'æ¸¡', 'å±', 'çƒ›', 'æ™“', 'å·', 'æ·¹', 'å®˜', 'é€¼', 'å§“', 'ç', 'æ—±', 'å¾’', 'è…¾', 'å‚¬', 'åŠ', 'è·ª', 'æ¸ ', 'çŒ', 'æº‰', 'éš†', 'å¡Œ', 'éœ²', 'ç‡ƒ', 'ç†Š', 'æŒ£', 'ç†„', 'å–·', 'ç¼º', 'çº¯', 'å†¶', 'ç‚¼', 'ç›†'],
            
            '4-1': ['æ½®', 'ç§°', 'ç›', 'ç¬¼', 'ç½©', 'è’™', 'è–„', 'é›¾', 'æ˜‚', 'æ²¸', 'è´¯', 'æ—§', 'æ¢', 'ç¿', 'çƒ‚', 'ç«¿', 'èŒ«', 'æ¡¨', 'è§„', 'å¾‹', 'æ”¯', 'æ ª', 'ç¼', 'éš™', 'è€€', 'æ¢¢', 'å¯‚', 'è«', 'è…Š', 'æµ‘', 'ç–‘', 'è™', 'å ', 'é“º', 'å‡', 'åŒ€', 'å ', 'èŒ', 'æŸ„', 'è§¦', 'ç—•', 'é€', 'å®…', 'è”½', 'å¼ƒ', 'æ¯«', 'é‡', 'æ‹©', 'å€', 'ç©´', 'æ˜', 'æœ', 'å€¾', 'æ‰’', 'æŠ›', 'æº¢', 'å…', 'å¢™', 'ç‰Œ', 'æ·»', 'è®­', 'è¦†', 'å‡', 'è¾£', 'é…·', 'æ„‰', 'æ‹†', 'è', 'å‰©', 'ä¼', 'ç…¤', 'é¢ˆ', 'éƒ‘', 'å‰', 'å‰§', 'é¤', 'å€˜', 'é¥®', 'ä¾', 'è„¾', 'è¹²', 'ä¾›', 'é‚»', 'æ€§', 'æ ¼', 'å‡­', 'è´ª', 'èŒ', 'ç—’', 'ç¨¿', 'è¸©', 'æ¢…', 'è›‡', 'è·Œ', 'æ’', 'è¾Ÿ', 'å´‡', 'æ—‹', 'å˜‰', 'ç –', 'éš”', 'å±¯', 'å ¡', 'å’', 'ä»—', 'æ‰¶', 'æ™º', 'æ…§', 'é­„', 'æ®¿', 'å»Š', 'æŸ±', 'æ ½', 'ç­‘', 'é˜', 'æœ±', 'å ¤', 'é›•', 'ç‹®', 'æ€', 'å­Ÿ', 'æµ©', 'é™µ', 'è¾', 'å”¯', 'èˆ', 'å›', 'æ´ª', 'æš´', 'çŒ›', 'æ¶¨', 'è£¤', 'æ‡’', 'ç¨³', 'ä¿—', 'è¡¡', 'åº', 'ä¼', 'å³¡', 'æ¡‚', 'ç§»', 'æ¹¾', 'å½¼', 'è¢­', 'ä½™', 'æ€€', 'æ—·', 'æš‚', 'èƒ', 'è„‰', 'å¸', 'ä¹‰', 'ä¼¯', 'ç§Ÿ', 'æŒ¯', 'èŒƒ', 'é—¯', 'å‡¡', 'å·¡', 'åš·', 'å¦‡', 'æƒ©', 'ç¯‡', 'è', 'ç¿»', 'å¸˜', 'é¡µ', 'åˆ ', 'è¯', 'ç‡¥', 'æ¡', 'æ´½', 'æ˜', 'å…', 'ç³Š', 'æ”¹', 'ç¨‹', 'èµ–', 'è€•', 'é©¾', 'å¹»', 'æ½œ', 'æ ¸', 'æ§', 'è”', 'å“²', 'å½’', 'æ', 'å‡¶', 'ç¬¨', 'é¸½', 'ä»…', 'é¡¿', 'æ', 'ç»˜', 'å¨', 'ç›ˆ', 'æ•', 'æ·', 'å´­'],
            
            '4-2': ['äº­', 'åº­', 'æ½­', 'èº', 'è°™', 'æ¾œ', 'ç‘•', 'æ”€', 'å³¦', 'æ³°', 'éª†', 'é©¼', 'ç½—', 'éšœ', 'å…€', 'ç»µ', 'æµ™', 'æ¡', 'ç°‡', 'æµ“', 'è‡€', 'ç¨', 'é¢', 'æ“¦', 'èœ¿', 'èœ’', 'ä¹³', 'æ®', 'æº', 'ç»´', 'è´¢', 'å±', 'è´§', 'é©°', 'èµ ', 'é©¶', 'å¾·', 'æƒ‘', 'ç ', 'åº“', 'æ', 'æ©¡', 'æ‹¨', 'å°Š', 'æ²ƒ', 'å‘ˆ', 'æƒ«', 'å ª', 'å–„', 'æ¬¾', 'ä¾‹', 'ç˜¦', 'æ°', 'å–‰', 'æ¶', 'åƒµ', 'é…', 'å¹¼', 'æ»©', 'ä¾¦', 'å˜²', 'å•„', 'ä¼', 'æ„š', 'è ¢', 'è¿”', 'å', 'æ‹¦', 'é¸¥', 'å¸½', 'å½»', 'è™', 'è ', 'æ•', 'è›¾', 'èšŠ', 'é¿', 'é”', 'é“›', 'è‡', 'æ­', 'ç¢', 'è§', 'å‰Š', 'å–‚', 'å“¨', 'æŒº', 'æ–¯', 'ç”©', 'è¸¢', 'æª', 'é˜²', 'é¬¼', 'æ±‰', 'æ»š', 'æ¯', 'æƒ¯', 'ç‰º', 'ç‰²', 'å‡¯', 'å¾', 'é˜¿', 'å§¨', 'æµ', 'è´¡', 'åœ£', 'é©»', 'ç½ª', 'æ¶', 'å¥', 'åº·', 'å¾„', 'ç•…', 'ç£•', 'ç»Š', 'ç¬', 'å¼§', 'ç¿”', 'æƒ', 'ç¼¤', 'æ‰°', 'æ¬²', 'å±ˆ', 'èŒ', 'è¯Š', 'æ’¼', 'è¹‹', 'é™', 'æ£š', 'é¥°', 'å† ', 'èŠ', 'ç§', 'ç‡', 'è§…', 'è€¸', 'æ£', 'æ¬', 'å·¢', 'è°', 'çœ ', 'è¾›', 'èš•', 'æ¡‘', 'æ˜¼', 'è€•', 'ç»©', 'å¡', 'é¹­', 'ç¬ ', 'ç•¥', 'è¾©', 'å¥‰', 'è¿', 'ç£…', 'æ‹´', 'æ‹–', 'é‡Š', 'å®£', 'è¨', 'å¦„', 'æ‰§', 'æ¸¯', 'æ¾ˆ', 'å£¶', 'ç¼¸', 'ç½¢', 'è‹Ÿ', 'ç»£', 'æŒ¥', 'å¾½', 'è‹', 'å“‘', 'æ˜Œ', 'å¦»', 'åˆº', 'ç»‘', 'æ‰', 'é¹Š', 'è”¡', 'ç¬', 'è‚ ', 'èƒƒ', 'çƒ«', 'å‰‚', 'æ±¤', 'ç„°', 'é©±', 'è¢–', 'è´¥', 'ç½š', 'ä½©', 'é¥¶', 'æŠ—', 'æŠ¼', 'é”', 'ç‹ ', 'è†', 'è‚', 'è„'],
            
            '5-1': ['çªƒ', 'ç‚’', 'é”…', 'è¸®', 'å“Ÿ', 'é¥¿', 'æƒ§', 'å……', 'æª', 'çš±', 'ç¢—', 'é…¸', 'æ’‘', 'æŸœ', 'ä¾£', 'å¨±', 'ç›’', 'è±«', 'è¶Ÿ', 'è¯µ', 'é›¶', 'ç¼–', 'æŸ', 'æ´›', 'æ¦†', 'ç•”', 'å¸', 'é­‚', 'ç¼•', 'å¹½', 'è‘¬', 'æ„', 'è…®', 'ç”š', 'ç»¸', 'è°“', 'æ¢³', 'è¡°', 'ç»¢', 'ä¾¨', 'é²¸', 'çŒª', 'è…­', 'å“º', 'æ»¤', 'è‚š', 'è‚º', 'çŸ®', 'åˆ¤', 'èƒ', 'ç›—', 'å«Œ', 'å¤¹', 'æ™', 'è—•', 'ç²˜', 'å™ª', 'åºŸ', 'æ', 'é¥µ', 'æº…', 'é’©', 'ç¿¼', 'çºµ', 'å•ª', 'é³ƒ', 'çš', 'å”‡', 'æ²®', 'è¯±', 'è¯«', 'è·µ', 'äº©', 'å°', 'å©', 'å’', 'èŒ…', 'æ¦¨', 'æ¦´', 'æ‰', 'çŸ¶', 'æ··', 'æ˜”', 'å¢Ÿ', 'æ›¼', 'ç–¾', 'çˆ†', 'ç ¾', 'ç ¸', 'é¢¤', 'ç³•', 'è¿ª', 'æ‚', 'è±ª', 'èªŠ', 'ç½®', 'å¸', 'å¦™', 'ç‰ˆ', 'æ…ˆ', 'ç¥¥', 'æ­§', 'è°¨', 'æ…', 'æŸ', 'çš‡', 'ç‘', 'å‰”', 'æ­', 'è±', 'ç‘¶', 'å®', 'å®‹', 'ä¾µ', 'ç»Ÿ', 'é”€', 'ç‘°', 'çƒ¬', 'åº™', 'åŠ¡', 'è‘›', 'å¼', 'è…”', 'å´', 'å²–', 'å°¸', 'æ–©', 'å ', 'é›¹', 'ä»‡', 'æ¨', 'çœº', 'ä¸¸', 'å´–', 'å²·', 'å…¸', 'å‰¯', 'å§”', 'å', 'å®¾', 'æ³½', 'å¥', 'è¯', 'é’®', 'ç»', 'æ‹‚', 'éª‘', 'å—“', 'å…š'],
            
            '5-2': ['æ¯¯', 'æ¸²', 'å‹’', 'åŸ', 'è¿‚', 'è¥Ÿ', 'è¹„', 'è²Œ', 'æ‹˜', 'ç¾', 'æ¶©', 'è·¤', 'å', 'æ¶¯', 'æ™°', 'ä¼', 'æŠš', 'ç»', 'ç–†', 'é™·', 'ç‰§', 'è“‘', 'é®', 'é†‰', 'åªš', 'é”„', 'å‰¥', 'æ¯¡', 'å¸', 'å’€', 'åš¼', 'æ¼ ', 'å¯', 'è¢„', 'è¢', 'å‚»', 'èƒš', 'ç¥¸', 'æ‚£', 'è‡‚', 'èµ‹', 'æ·˜', 'å¦¨', 'å²‚', 'ç»', 'æ±', 'å˜', 'æ„§', 'äº', 'æ¢', 'æƒ ', 'è¯£', 'ä¹ƒ', 'æ›°', 'ç¦½', 'ä¾®', 'è¾±', 'è°', 'æ•', 'çŸ©', 'å›š', 'å˜»', 'è‡£', 'æ·®', 'æŸ‘', 'æ©˜', 'æ³', 'è´¼', 'èµ”', 'å¦®', 'å½¹', 'ç¡', 'ç‚­', 'è°Š', 'è°£', 'å™©', 'è€—', 'è·º', 'å«‚', 'æŒ', 'ç¯®', 'å’†', 'å“®', 'ç–¯', 'ç‹', 'æ·Œ', 'è‚†', 'æª', 'è±¹', 'çª', 'å‘»', 'è†›', 'æ€', 'ç¥­', 'å¥ ', 'èµµ', 'ç’§', 'å¬', 'è¯º', 'æ€¯', 'ç‘Ÿ', 'æ‹’', 'è¯¸', 'è†', 'å¦’', 'å¿Œ', 'æ›¹', 'ç£', 'ç”˜', 'é²', 'å»¶', 'å¹”', 'ç§', 'å¯¨', 'æ“‚', 'å‘', 'æ´', 'ä¸', 'æ“', 'ç»½', 'æ‰³', 'å’š', 'ç›‘', 'ä¾„', 'éƒ', 'çš†', 'æ•›', 'åª³', 'éªš', 'å®—', 'æ€œ', 'å¸•', 'è„Š', 'è', 'é”¦', 'å§¹', 'å«£', 'æš‡', 'é¢‡', 'å°¼', 'è‰‡', 'å‰', 'è‰„', 'ç¿˜', 'èˆ±', 'å§†', 'ç¥·', 'é›‡', 'å“—'],
            
            '6-1': ['é‚€', 'ä¿¯', 'ç€‘', 'å³­', 'èº¯', 'æ´¥', 'è•´', 'ä¾ ', 'è°§', 'å··', 'ä¿', 'é€—', 'åº', 'çƒ˜', 'çƒ¤', 'éŸµ', 'å‹¤', 'å‹‰', 'å»', 'æ–½', 'æŒ ', 'åº¸', 'è‰°', 'æ¯…', 'é“²', 'åŠ£', 'æƒ¹', 'è®¥', 'æµ†', 'å²”', 'æŒš', 'å¯', 'é¢‘', 'æœ¦', 'èƒ§', 'å‡„', 'æ–‘', 'ç¯‡', 'æ', 'å¡«', 'æ€¨', 'æ€', 'å”‰', 'è£¹', 'é­', 'æ¢§', 'æ·‹', 'æ’•', 'éœ‰', 'è™‘', 'æ‚ ', 'ä»ª', 'æ­‰', 'æºœ', 'å˜¿', 'å‰²', 'æ™¶', 'è¹', 'è”¼', 'èµ„', 'çŸ¿', 'èµ', 'ç«­', 'æ»¥', 'èƒ', 'ç¹', 'å—¡', 'é¹¿', 'éª', 'é¹°', 'æ½º', 'è„‚', 'å©´', 'çœ·', 'æ‰­', 'èƒ¯', 'å¨', 'å¥—', 'çŒ¬', 'ç•œ', 'çªœ', 'æŒ½', 'å›«', 'å›µ', 'æ£', 'æ', 'æ', 'éœœ', 'è¯¦', 'é€', 'ç« ', 'å’³', 'å—½', 'å¡‘', 'å¯‡', 'è•‰', 'ç­’', 'èº', 'é©', 'é­', 'æ³£', 'æµ´', 'æ', 'ç¢‘', 'èŒµ', 'èœ¡', 'é™Œ', 'ç›²', 'é”®', 'ç²¼', 'éœ', 'å½•'],
            
            '6-2': ['æŒª', 'è’¸', 'ç§§', 'è', 'ç•ª', 'é”»', 'é›…', 'å‹ƒ', 'æ—¬', 'ç†¬', 'è’œ', 'é†‹', 'é¥º', 'ç¿¡', 'æ‹Œ', 'æ¦›', 'æ —', 'ç­', 'é­', 'éº¦', 'å¯º', 'é€›', 'ç±', 'å±‰', 'æ€–', 'ç…', 'é­”', 'èƒ–', 'åˆ‘', 'å“¼', 'å³»', 'æ®‹', 'åŒª', 'çª', 'å•ƒ', 'èˆ…', 'é¸¿', 'é¼', 'æ—º', 'ç‚Š', 'ä¹–', 'è£™', 'å…œ', 'å¸', 'å“', 'æ©±', 'é”ˆ', 'æ‘©', 'æ‰', 'ç›', 'è˜¸', 'æ¯’', 'æ’‡', 'å™', 'æ“', 'åŒ£', 'å–³', 'å­', 'å¨œ', 'ä¼Š', 'æ…', 'åŸƒ', 'ä¼¦', 'è—¤', 'æ', 'ç¢±', 'é¡½', 'å“', 'æ•ˆ', 'èš€', 'ä¹', 'èª‰', 'è¡”', 'ç²ª', 'æ', 'æ¾¡', 'æ¢°', 'é€†', 'ç«', 'åŸŸ']
        };

        // è·å–æ‰€æœ‰æ±‰å­—ï¼ˆç”¨äºå…¨éƒ¨å¹´çº§é€‰é¡¹ï¼‰
        const allChars = Object.values(gradeChars).flat();

        let writerInstances = [];

        // ç”ŸæˆæŒ‡å®šæ–‡å­—çš„ç»ƒå­—å¸–
        function generateSheet() {
            const input = document.getElementById('charInput').value.trim();
            
            if (!input) {
                alert('è¯·è¾“å…¥è¦ç»ƒä¹ çš„æ–‡å­—ï¼');
                return;
            }

            const chars = input.split('').filter(char => char.trim() && /[\u4e00-\u9fa5]/.test(char));
            
            if (chars.length === 0) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„æ±‰å­—ï¼');
                return;
            }

            renderSheet(chars);
        }

        // éšæœºç”Ÿæˆç»ƒå­—å¸–
        function generateRandom() {
            const randomCount = parseInt(document.getElementById('randomCount').value) || 8;
            const grade = document.getElementById('gradeSelect').value;

            // æ ¹æ®é€‰æ‹©çš„å¹´çº§è·å–å­—åº“
            let charPool;
            if (grade === 'all') {
                charPool = allChars;
            } else {
                charPool = gradeChars[grade] || allChars;
            }

            if (charPool.length === 0) {
                alert('æ‰€é€‰å¹´çº§å­—åº“ä¸ºç©ºï¼');
                return;
            }

            // éšæœºé€‰æ‹©å­—æ•°ï¼Œä¸è¶…è¿‡å­—åº“æ€»æ•°
            const actualCount = Math.min(randomCount, charPool.length);
            const shuffled = [...charPool].sort(() => Math.random() - 0.5);
            const chars = shuffled.slice(0, actualCount);

            document.getElementById('charInput').value = chars.join('');
            renderSheet(chars);
        }

        // æ¸²æŸ“ç»ƒå­—å¸–
        function renderSheet(chars) {
            const previewArea = document.getElementById('previewArea');
            previewArea.innerHTML = '<div class="loading">æ­£åœ¨ç”Ÿæˆç»ƒå­—å¸–ï¼Œè¯·ç¨å€™...</div>';

            // æ¸…é™¤ä¹‹å‰çš„å®ä¾‹
            writerInstances = [];

            // é‡ç½®æ‰“å°å¸ƒå±€ç±»
            const printLayout = document.getElementById('printLayout').value;
            previewArea.className = 'preview-area print-layout-' + printLayout;

            setTimeout(() => {
                const container = document.createElement('div');

                chars.forEach((char, charIndex) => {
                    const row = createCharRow(char, charIndex);
                    container.appendChild(row);
                });

                previewArea.innerHTML = '';
                previewArea.className = 'preview-area print-layout-' + printLayout;
                previewArea.appendChild(container);
            }, 100);
        }

        // è·å–æ‹¼éŸ³
        function getPinyin(char) {
            try {
                // ä½¿ç”¨ pinyin-pro åº“
                if (typeof pinyinPro !== 'undefined' && pinyinPro.pinyin) {
                    return pinyinPro.pinyin(char, { toneType: 'symbol' });
                }
            } catch (error) {
                console.log('æ‹¼éŸ³åº“æœªåŠ è½½');
            }
            return '';
        }

        // åˆ›å»ºå•ä¸ªæ±‰å­—çš„è¡Œ
        function createCharRow(char, charIndex) {
            const row = document.createElement('div');
            row.className = 'char-row';

            // å¤´éƒ¨åŒºåŸŸï¼ˆæ±‰å­—+æ‹¼éŸ³+ç¬”ç”»æ¼”ç¤ºï¼‰
            const header = document.createElement('div');
            header.className = 'char-header';

            // æ±‰å­—ä¿¡æ¯ï¼ˆæ±‰å­—+æ‹¼éŸ³ï¼‰
            const charInfo = document.createElement('div');
            charInfo.className = 'char-info';
            
            const title = document.createElement('div');
            title.className = 'char-title';
            title.textContent = char;
            charInfo.appendChild(title);

            const pinyin = document.createElement('div');
            pinyin.className = 'char-pinyin';
            pinyin.textContent = getPinyin(char);
            charInfo.appendChild(pinyin);

            header.appendChild(charInfo);

            // ç¬”ç”»æ¼”ç¤ºåŒºåŸŸï¼ˆåŒä¸€è¡Œï¼‰
            const demoSection = document.createElement('div');
            demoSection.className = 'stroke-demo-section';
            
            const sequence = document.createElement('div');
            sequence.className = 'stroke-sequence';
            sequence.id = `sequence-${charIndex}`;
            demoSection.appendChild(sequence);

            header.appendChild(demoSection);
            row.appendChild(header);

            // æçº¢ç»ƒä¹ åŒºåŸŸï¼ˆç‹¬ç«‹ä¸€è¡Œï¼‰
            const practiceSection = document.createElement('div');
            practiceSection.className = 'practice-demo-section';
            
            const practiceSeq = document.createElement('div');
            practiceSeq.className = 'practice-sequence';
            practiceSeq.id = `practice-${charIndex}`;
            practiceSection.appendChild(practiceSeq);

            row.appendChild(practiceSection);

            // å»¶è¿Ÿåˆå§‹åŒ–ï¼Œç¡®ä¿DOMå·²æ¸²æŸ“
            setTimeout(() => initCharStrokes(char, charIndex), 200);

            return row;
        }

        // åˆå§‹åŒ–æ±‰å­—çš„ç¬”ç”»åºåˆ—
        function initCharStrokes(char, charIndex) {
            const gridSize = parseInt(document.getElementById('gridSize').value) || 45;
            // å…è®¸0å€¼ï¼Œä½¿ç”¨ ?? è€Œä¸æ˜¯ ||
            const traceCountInput = document.getElementById('traceCount').value;
            const blankCountInput = document.getElementById('blankCount').value;
            const traceCount = traceCountInput !== '' ? parseInt(traceCountInput) : 4;
            const blankCount = blankCountInput !== '' ? parseInt(blankCountInput) : 2;
            const totalPracticeCount = traceCount + blankCount;
            const opacity = parseInt(document.getElementById('opacity').value) / 100 || 0.25;
            const sequenceContainer = document.getElementById(`sequence-${charIndex}`);
            const practiceContainer = document.getElementById(`practice-${charIndex}`);

            if (!sequenceContainer || !practiceContainer) return;

            // åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„writeræ¥è·å–ç¬”ç”»æ•°
            const tempDiv = document.createElement('div');
            tempDiv.style.position = 'absolute';
            tempDiv.style.left = '-9999px';
            document.body.appendChild(tempDiv);

            try {
                const tempWriter = HanziWriter.create(tempDiv, char, {
                    width: gridSize,
                    height: gridSize,
                    showCharacter: false,
                    onLoadCharDataSuccess: function(charData) {
                        // æ•°æ®åŠ è½½æˆåŠŸåå¤„ç†
                        try {
                            const strokeCount = charData.strokes.length;
                            document.body.removeChild(tempDiv);

                            // ä¸Šæ–¹ï¼šä¸ºæ¯ä¸ªç¬”ç”»åˆ›å»ºæ ¼å­ï¼ˆæ¼”ç¤ºç¬”ç”»é¡ºåºï¼‰
                            for (let i = 1; i <= strokeCount; i++) {
                                const item = document.createElement('div');
                                item.className = 'stroke-item';

                                const gridContainer = document.createElement('div');
                                gridContainer.className = 'grid-container-small';
                                // ç¬”ç”»æ¼”ç¤ºæ ¼å­å›ºå®šä¸º22pxï¼Œä¸å—gridSizeå½±å“
                                gridContainer.style.width = '22px';
                                gridContainer.style.height = '22px';
                                gridContainer.id = `char-${charIndex}-demo-${i}`;
                                // ç¬”ç”»æ¼”ç¤ºæ ¼å­ä¸æ·»åŠ ç”°å­—æ ¼çº¿

                                const label = document.createElement('div');
                                label.className = 'stroke-label';
                                label.textContent = `${i}`;

                                item.appendChild(gridContainer);
                                item.appendChild(label);
                                sequenceContainer.appendChild(item);

                                // åˆå§‹åŒ–è¿™ä¸ªæ ¼å­ï¼Œæ˜¾ç¤ºå‰iç¬”ï¼ˆç¬”ç”»æ¼”ç¤ºç”¨å®è‰²ï¼Œå›ºå®š22pxï¼‰
                                setTimeout(() => {
                                    initStrokeGrid(char, charIndex, i, strokeCount, 22, 1.0, false, true);
                                }, i * 30);
                            }

                            // ä¸‹æ–¹ï¼šåˆ›å»ºç»ƒä¹ æ ¼å­
                            for (let j = 0; j < totalPracticeCount; j++) {
                                const practiceItem = document.createElement('div');
                                practiceItem.className = 'practice-item';

                                const practiceGrid = document.createElement('div');
                                practiceGrid.className = 'grid-container';
                                practiceGrid.style.width = gridSize + 'px';
                                practiceGrid.style.height = gridSize + 'px';
                                practiceGrid.id = `char-${charIndex}-practice-${j}`;
                                practiceGrid.innerHTML = `
                                    <div class="grid-line-h"></div>
                                    <div class="grid-line-v"></div>
                                `;

                                // æ·»åŠ æ ‡ç­¾åŒºåˆ†æçº¢æ ¼å’Œçº¯ç»ƒæ ¼
                                const label = document.createElement('div');
                                label.className = 'practice-label';
                                if (j < traceCount) {
                                    label.textContent = 'æçº¢';
                                } else {
                                    label.textContent = 'ç»ƒä¹ ';
                                }

                                practiceItem.appendChild(practiceGrid);
                                practiceItem.appendChild(label);
                                practiceContainer.appendChild(practiceItem);

                                // åˆå§‹åŒ–æ ¼å­
                                // å‰ traceCount ä¸ªæ ¼å­æ˜¾ç¤ºæçº¢ï¼ˆæµ…è‰²æ–‡å­—ï¼‰
                                // åé¢çš„æ ¼å­å®Œå…¨ç©ºç™½
                                const isTrace = j < traceCount;
                                setTimeout(() => {
                                    if (isTrace) {
                                        // æçº¢æ ¼ï¼šæ˜¾ç¤ºæµ…è‰²æ–‡å­—
                                        initStrokeGrid(char, charIndex, strokeCount, strokeCount, gridSize, opacity, false, false, j);
                                    }
                                    // çº¯ç»ƒæ ¼ï¼šä¸æ˜¾ç¤ºä»»ä½•å†…å®¹ï¼Œä¿æŒç©ºç™½
                                }, (strokeCount + j + 1) * 30);
                            }

                        } catch (error) {
                            console.error(`å¤„ç†æ±‰å­—"${char}"çš„ç¬”ç”»æ•°æ®æ—¶å‡ºé”™:`, error);
                            sequenceContainer.innerHTML = `<div style="color: #999; padding: 20px;">æ— æ³•å¤„ç†"${char}"çš„ç¬”ç”»æ•°æ®</div>`;
                        }
                    },
                    onLoadCharDataError: function(error) {
                        // æ•°æ®åŠ è½½å¤±è´¥
                        document.body.removeChild(tempDiv);
                        console.error(`æ— æ³•åŠ è½½æ±‰å­—"${char}"çš„ç¬”ç”»æ•°æ®:`, error);
                        sequenceContainer.innerHTML = `<div style="color: #999; padding: 20px;">æ— æ³•åŠ è½½"${char}"çš„ç¬”ç”»æ•°æ®ï¼Œå¯èƒ½æ˜¯ç”Ÿåƒ»å­—æˆ–ç½‘ç»œé—®é¢˜</div>`;
                    }
                });

            } catch (error) {
                console.error(`åˆ›å»ºæ±‰å­—"${char}"æ—¶å‡ºé”™:`, error);
                if (document.body.contains(tempDiv)) {
                    document.body.removeChild(tempDiv);
                }
                sequenceContainer.innerHTML = `<div style="color: #999; padding: 20px;">æ— æ³•åˆ›å»º"${char}"ï¼Œå¯èƒ½æ˜¯ç”Ÿåƒ»å­—</div>`;
            }
        }

        // åˆå§‹åŒ–å•ä¸ªç¬”ç”»æ ¼å­
        function initStrokeGrid(char, charIndex, strokeIndex, totalStrokes, gridSize, opacity, isFinal = false, isDemo = false, practiceIndex = 0) {
            // æ ¹æ®ç±»å‹å†³å®šå®¹å™¨ ID
            let containerId;
            if (isDemo) {
                containerId = `char-${charIndex}-demo-${strokeIndex}`;
            } else if (isFinal) {
                containerId = `char-${charIndex}-stroke-final`;
            } else {
                containerId = `char-${charIndex}-practice-${practiceIndex}`;
            }

            try {
                // ä½¿ç”¨ä¸€ä¸ªä¸´æ—¶å®¹å™¨æ¥åŠ è½½æ•°æ®ï¼Œé¿å…åœ¨ç›®æ ‡å®¹å™¨ä¸­åˆ›å»ºå¤šä½™çš„å…ƒç´ 
                const tempContainer = document.createElement('div');
                tempContainer.style.position = 'absolute';
                tempContainer.style.left = '-9999px';
                document.body.appendChild(tempContainer);

                const writer = HanziWriter.create(tempContainer, char, {
                    width: gridSize,
                    height: gridSize,
                    showCharacter: false,
                    showOutline: false,
                    onLoadCharDataSuccess: function(charData) {
                        // æ•°æ®åŠ è½½æˆåŠŸåï¼Œæ‰‹åŠ¨ç»˜åˆ¶å‰ N ç¬”
                        try {
                            const container = document.getElementById(containerId);
                            if (!container) {
                                console.error(`æ‰¾ä¸åˆ°å®¹å™¨: ${containerId}`);
                                document.body.removeChild(tempContainer);
                                return;
                            }

                            // åˆ›å»º SVG å…ƒç´ 
                            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                            svg.setAttribute('width', gridSize);
                            svg.setAttribute('height', gridSize);
                            // Hanzi Writer ä½¿ç”¨ 0-1024 çš„åæ ‡ç³»ç»Ÿï¼ŒåŸç‚¹åœ¨å·¦ä¸Šè§’
                            svg.setAttribute('viewBox', '0 0 1024 1024');
                            svg.style.position = 'absolute';
                            svg.style.top = '0';
                            svg.style.left = '0';
                            svg.style.pointerEvents = 'none';
                            
                            // åˆ›å»ºä¸€ä¸ª group
                            const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
                            // Hanzi Writer çš„å­—ç¬¦æ•°æ®é€šå¸¸éœ€è¦å˜æ¢ï¼šYè½´ç¿»è½¬ï¼Œç„¶åç§»åŠ¨
                            g.setAttribute('transform', 'scale(1, -1) translate(0, -900)');
                            
                            // ç»˜åˆ¶å‰ strokeIndex ç¬”
                            for (let i = 0; i < strokeIndex && i < charData.strokes.length; i++) {
                                const strokePath = charData.strokes[i];
                                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                                path.setAttribute('d', strokePath);
                                // ç¬”ç”»æ¼”ç¤ºç”¨å®è‰²ï¼Œç»ƒä¹ ç”¨æµ…è‰²
                                if (isDemo) {
                                    path.setAttribute('fill', '#333'); // å®è‰²é»‘è‰²
                                } else {
                                    path.setAttribute('fill', `rgba(255, 107, 107, ${opacity})`); // æµ…çº¢è‰²
                                }
                                path.setAttribute('stroke', 'none');
                                g.appendChild(path);
                            }
                            
                            svg.appendChild(g);
                            container.appendChild(svg);
                            
                            // æ¸…ç†ä¸´æ—¶å®¹å™¨
                            document.body.removeChild(tempContainer);
                            
                        } catch (error) {
                            console.error(`æ˜¾ç¤ºç¬”ç”»å¤±è´¥:`, error);
                            if (document.body.contains(tempContainer)) {
                                document.body.removeChild(tempContainer);
                            }
                        }
                    },
                    onLoadCharDataError: function(error) {
                        console.error(`åŠ è½½å­—ç¬¦æ•°æ®å¤±è´¥:`, error);
                        if (document.body.contains(tempContainer)) {
                            document.body.removeChild(tempContainer);
                        }
                    }
                });

            } catch (error) {
                console.error(`åˆå§‹åŒ–æ ¼å­å¤±è´¥:`, error);
            }
        }

        // æ‰“å°åŠŸèƒ½
        function printSheet() {
            const previewArea = document.getElementById('previewArea');
            
            if (!previewArea.querySelector('.char-row')) {
                alert('è¯·å…ˆç”Ÿæˆç»ƒå­—å¸–å†æ‰“å°ï¼');
                return;
            }

            // åº”ç”¨æ‰“å°å¸ƒå±€è®¾ç½®
            const printLayout = document.getElementById('printLayout').value;
            previewArea.className = 'preview-area print-layout-' + printLayout;

            window.print();
        }

        // å›è½¦é”®å¿«æ·ç”Ÿæˆ
        document.getElementById('charInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                generateSheet();
            }
        });

        // ç›‘å¬æ ¼å­å¤§å°å˜åŒ–
        document.getElementById('gridSize').addEventListener('change', function() {
            const input = document.getElementById('charInput').value.trim();
            if (input) {
                const chars = input.split('').filter(char => char.trim() && /[\u4e00-\u9fa5]/.test(char));
                if (chars.length > 0) {
                    renderSheet(chars);
                }
            }
        });

        // ç›‘å¬é€æ˜åº¦å˜åŒ–
        document.getElementById('opacity').addEventListener('change', function() {
            const input = document.getElementById('charInput').value.trim();
            if (input) {
                const chars = input.split('').filter(char => char.trim() && /[\u4e00-\u9fa5]/.test(char));
                if (chars.length > 0) {
                    renderSheet(chars);
                }
            }
        });
    </script>
</body>
</html>

